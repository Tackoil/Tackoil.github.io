---
title: 关于 WoldCloud_Dynamic 的一些计划与想法
date: 2021-08-22 16:35:05
categories: JavaScript
hide: true
---

## 由来

　　在研创项目中有一项这样的工作，当时觉得应该有人做的很完美了，所以就很快接下了这份工作。正如标题所写，就是**词云**。我所使用的包为 [Timothy Guan-tin Chien](https://github.com/timdream) 的 [wordcloud2](https://github.com/timdream/wordcloud2.js)。在静态上，这个包可以比较快的生成想要的词云。还支持一定的 `onClick` 功能。下面有一个作者所写的 demo。

[https://wordcloud2-js.timdream.org/](https://wordcloud2-js.timdream.org/)

　　但是有一点令我不太满意的问题就在于它是静态的。可能和 HTML 概念中的静态页面和动态页面不太一样。这里所指的静态是指它不会响应屏幕的大小，数据的变化。如果想要响应它们，只能做一件事：重渲染。

　　同样是重渲染，可以发现 Echart 在数据改变时，前后是有动画进行过渡的，而 WordCloud2 没有。这一点在 WordCloud2 上有以下三种表现。

- 重渲染时会出现空白，然后再出现各个词。
- 相同数据两次渲染结果不同。
- 仅权重改变的数据两次渲染的差别较大。

　　这也就导致每次重渲染，只是重新获得了一张图而已。对于一个用户长时间观察的页面而言，这里的效果显然不是很完美。

　　我也大概找过两三个其他的 WordCloud 库，效果都不算完美。有的虽然有动画，但每次渲染会大幅度修改文字的所在位置，所以观感仍不算好。所以目标就是做一款可以支持动态过渡的 WordCloud。

## 潜在问题与假设

### 潜在问题

　　其实 WordCloud 的思路应该不算复杂，原作者未引用任何外部包就完成了该功能。主要分为两步：**根据权重进行排序**、**在当前页面找到下一个词的位置**。显然第二部分才是核心问题，一般思路的话就应该是贪心了，也就是尽可能在靠近中心的地方找到空白位置。但这样就会发现，这种想法与当数据变化时的改动最小存在严重的分歧。

